<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../../../assets/css/light.css" integrity="sha512-ZX/aBpdCBW4Eu5Bjc7USrGeiSiN2UpIuetQ1YMRtplE4MkM78yNQ+KiJYTWqFueppZ1C//BgkiOd+Vvx//iabw==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../../../assets/css/dark.css" integrity="sha512-w0U8MAmTKZwYGKoZzBaimTEtI6cRyPxTv78JtkqDmvfjljTGU55Nppb++dx5aDvdhoY6R1UMRQzTOYg0Z9DOoQ==" title="Dark" id="stylesheet-dark" disabled><title>Programming Language Foundations in Agda – Assignment4</title><script src="../../../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../../../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../../../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header"><div class="wrapper"><a class="site-title" href="../../../">Programming Language Foundations in Agda</a><nav class="site-nav"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../../../">The Book</a> <a class="page-link" href="../../../Announcements/">Announcements</a> <a class="page-link" href="../../../GettingStarted/">Getting Started</a> <a class="page-link" href="../../../Citing/">Citing</a> <a class="page-link" href="https://agda-zh.github.io/PLFA-zh/">中文</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon" aria-hidden="true"></i> </a><a class="page-link" href="../../../plfa.epub"><i class="fa fa-book" aria-hidden="true"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/courses/TSPL/2022/Assignment4.lagda.md">Source</a></li><li class="separator">•</li></ul></nav><header class="post-header"><h1 class="post-title">Assignment4: TSPL Assignment 4</h1></header><div class="post-content"><pre class="Agda"><a id="TSPL.2022_Assignment4-95" class="Keyword">module</a> <a id="TSPL.2022_Assignment4-102" href="../../../TSPL/2022/Assignment4/#" class="Module">Assignment4</a> <a id="TSPL.2022_Assignment4-114" class="Keyword">where</a>
</pre><h2 id="your-name-and-email-goes-here">YOUR NAME AND EMAIL GOES HERE</h2><h2 id="introduction">Introduction</h2><p>You must do <em>all</em> the exercises labelled “(recommended)”.</p><p>Exercises labelled “(stretch)” are there to provide an extra challenge. You don’t need to do all of these, but should attempt at least a few.</p><p>Exercises labelled “(practice)” are included for those who want extra practice.</p><p>Submit your homework using the “submit” command. Please ensure your files execute correctly under Agda!</p><h2 id="good-scholarly-practice.">Good Scholarly Practice.</h2><p>Please remember the University requirement as regards all assessed work. Details about this can be found at:</p><blockquote><p><a href="https://web.inf.ed.ac.uk/infweb/admin/policies/academic-misconduct">https://web.inf.ed.ac.uk/infweb/admin/policies/academic-misconduct</a></p></blockquote><p>Furthermore, you are required to take reasonable measures to protect your assessed work from unauthorised access. For example, if you put any such work on a public repository then you must set access permissions appropriately (generally permitting access only to yourself, or your group in the case of group practicals).</p><h2 id="debruijn">DeBruijn</h2><pre class="Agda"><a id="TSPL.2022_Assignment4-1184" class="Keyword">module</a> <a id="TSPL.2022_Assignment4-DeBruijn"></a><a id="TSPL.2022_Assignment4-1191" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-1191" class="Module">DeBruijn</a> <a id="TSPL.2022_Assignment4-1200" class="Keyword">where</a>
</pre><h2 id="imports">Imports</h2><pre class="Agda">  <a id="TSPL.2022_Assignment4-1233" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-1240" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="TSPL.2022_Assignment4-1278" class="Symbol">as</a> <a id="TSPL.2022_Assignment4-1281" class="Module">Eq</a>
  <a id="TSPL.2022_Assignment4-1286" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-1291" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="TSPL.2022_Assignment4-1294" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-1300" class="Symbol">(</a><a id="TSPL.2022_Assignment4-1301" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="TSPL.2022_Assignment4-1304" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-1306" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="TSPL.2022_Assignment4-1310" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-1314" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-1319" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-1326" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html" class="Module">Data.Empty</a> <a id="TSPL.2022_Assignment4-1337" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-1343" class="Symbol">(</a><a id="TSPL.2022_Assignment4-1344" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html#526" class="Datatype">⊥</a><a id="TSPL.2022_Assignment4-1345" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-1347" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html#628" class="Function">⊥-elim</a><a id="TSPL.2022_Assignment4-1353" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-1357" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-1362" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-1369" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Nat.html" class="Module">Data.Nat</a> <a id="TSPL.2022_Assignment4-1378" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-1384" class="Symbol">(</a><a id="TSPL.2022_Assignment4-1385" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="TSPL.2022_Assignment4-1386" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-1388" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="TSPL.2022_Assignment4-1392" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-1394" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="TSPL.2022_Assignment4-1397" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-1399" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Nat.Base.html#1645" class="Function Operator">_&lt;_</a><a id="TSPL.2022_Assignment4-1402" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-1404" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Nat.Properties.html#5518" class="Function Operator">_≤?_</a><a id="TSPL.2022_Assignment4-1408" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-1410" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Nat.Base.html#1558" class="InductiveConstructor">z≤n</a><a id="TSPL.2022_Assignment4-1413" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-1415" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Nat.Base.html#1600" class="InductiveConstructor">s≤s</a><a id="TSPL.2022_Assignment4-1418" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-1422" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-1427" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-1434" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="TSPL.2022_Assignment4-1451" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-1457" class="Symbol">(</a><a id="TSPL.2022_Assignment4-1458" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#656" class="Function Operator">¬_</a><a id="TSPL.2022_Assignment4-1460" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-1464" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-1469" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-1476" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a> <a id="TSPL.2022_Assignment4-1503" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-1509" class="Symbol">(</a><a id="TSPL.2022_Assignment4-1510" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Decidable.Core.html#1365" class="Function">True</a><a id="TSPL.2022_Assignment4-1514" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-1516" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Decidable.Core.html#1484" class="Function">toWitness</a><a id="TSPL.2022_Assignment4-1525" class="Symbol">)</a>
</pre><pre class="Agda">  <a id="TSPL.2022_Assignment4-1538" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-1543" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-1550" href="../../../DeBruijn/#" class="Module">plfa.part2.DeBruijn</a>
    <a id="TSPL.2022_Assignment4-1574" class="Keyword">hiding</a> <a id="TSPL.2022_Assignment4-1581" class="Symbol">()</a>
</pre><h4 id="exercise-mul-recommended">Exercise <code>mul</code> (recommended)</h4><p>Write out the definition of a lambda term that multiplies two natural numbers, now adapted to the intrinsically-typed de Bruijn representation.</p><pre class="Agda">  <a id="TSPL.2022_Assignment4-1779" class="Comment">-- Your code goes here</a>
</pre><h4 id="exercise-v-practice">Exercise <code>V¬—→</code> (practice)</h4><p>Following the previous development, show values do not reduce, and its corollary, terms that reduce are not values.</p><pre class="Agda">  <a id="TSPL.2022_Assignment4-1968" class="Comment">-- Your code goes here</a>
</pre><h4 id="exercise-mul-example-recommended">Exercise <code>mul-example</code> (recommended)</h4><p>Using the evaluator, confirm that two times two is four.</p><pre class="Agda">  <a id="TSPL.2022_Assignment4-2107" class="Comment">-- Your code goes here</a>
</pre><h2 id="more">More</h2><pre class="Agda"><a id="TSPL.2022_Assignment4-2150" class="Keyword">module</a> <a id="TSPL.2022_Assignment4-More"></a><a id="TSPL.2022_Assignment4-2157" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-2157" class="Module">More</a> <a id="TSPL.2022_Assignment4-2162" class="Keyword">where</a>
</pre><pre class="Agda">  <a id="TSPL.2022_Assignment4-2183" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-2190" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="TSPL.2022_Assignment4-2228" class="Symbol">as</a> <a id="TSPL.2022_Assignment4-2231" class="Module">Eq</a>
  <a id="TSPL.2022_Assignment4-2236" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-2241" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="TSPL.2022_Assignment4-2244" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-2250" class="Symbol">(</a><a id="TSPL.2022_Assignment4-2251" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="TSPL.2022_Assignment4-2254" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-2256" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="TSPL.2022_Assignment4-2260" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-2264" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-2269" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-2276" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html" class="Module">Data.Empty</a> <a id="TSPL.2022_Assignment4-2287" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-2293" class="Symbol">(</a><a id="TSPL.2022_Assignment4-2294" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html#526" class="Datatype">⊥</a><a id="TSPL.2022_Assignment4-2295" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-2297" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html#628" class="Function">⊥-elim</a><a id="TSPL.2022_Assignment4-2303" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-2307" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-2312" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-2319" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Nat.html" class="Module">Data.Nat</a> <a id="TSPL.2022_Assignment4-2328" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-2334" class="Symbol">(</a><a id="TSPL.2022_Assignment4-2335" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="TSPL.2022_Assignment4-2336" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-2338" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="TSPL.2022_Assignment4-2342" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-2344" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="TSPL.2022_Assignment4-2347" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-2349" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#528" class="Primitive Operator">_*_</a><a id="TSPL.2022_Assignment4-2352" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-2354" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Nat.Base.html#1645" class="Function Operator">_&lt;_</a><a id="TSPL.2022_Assignment4-2357" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-2359" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Nat.Properties.html#5518" class="Function Operator">_≤?_</a><a id="TSPL.2022_Assignment4-2363" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-2365" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Nat.Base.html#1558" class="InductiveConstructor">z≤n</a><a id="TSPL.2022_Assignment4-2368" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-2370" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Nat.Base.html#1600" class="InductiveConstructor">s≤s</a><a id="TSPL.2022_Assignment4-2373" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-2377" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-2382" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-2389" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="TSPL.2022_Assignment4-2406" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-2412" class="Symbol">(</a><a id="TSPL.2022_Assignment4-2413" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#656" class="Function Operator">¬_</a><a id="TSPL.2022_Assignment4-2415" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-2419" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-2424" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-2431" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a> <a id="TSPL.2022_Assignment4-2458" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-2464" class="Symbol">(</a><a id="TSPL.2022_Assignment4-2465" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Decidable.Core.html#1365" class="Function">True</a><a id="TSPL.2022_Assignment4-2469" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-2471" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Decidable.Core.html#1484" class="Function">toWitness</a><a id="TSPL.2022_Assignment4-2480" class="Symbol">)</a>
</pre><pre class="Agda">  <a id="TSPL.2022_Assignment4-2493" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-2498" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-2505" href="../../../More/#" class="Module">plfa.part2.More</a>
    <a id="TSPL.2022_Assignment4-2525" class="Keyword">hiding</a> <a id="TSPL.2022_Assignment4-2532" class="Symbol">(</a><a id="TSPL.2022_Assignment4-2533" href="../../../More/#plfa_plfa-part2-More-28705" class="Postulate">double-subst</a><a id="TSPL.2022_Assignment4-2545" class="Symbol">)</a>
</pre><h4 id="exercise-more-recommended-and-practice">Exercise <code>More</code> (recommended and practice)</h4><p>Formalise the remaining constructs defined in this chapter. Make your changes in this file. Evaluate each example, applied to data as needed, to confirm it returns the expected answer:</p><ul><li>sums (recommended)</li><li>unit type (practice)</li><li>an alternative formulation of unit type (practice)</li><li>empty type (recommended)</li><li>lists (practice)</li></ul><p>Please delimit any code you add as follows:</p><pre><code>-- begin
-- end</code></pre><h4 id="exercise-double-subst-stretch">Exercise <code>double-subst</code> (stretch)</h4>Show that a double substitution is equivalent to two single substitutions.<pre class="Agda">  <a id="TSPL.2022_Assignment4-3137" class="Keyword">postulate</a>
    <a id="TSPL.2022_Assignment4-More.double-subst"></a><a id="TSPL.2022_Assignment4-3151" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3151" class="Postulate">double-subst</a> <a id="TSPL.2022_Assignment4-3164" class="Symbol">:</a>
      <a id="TSPL.2022_Assignment4-3172" class="Symbol">∀</a> <a id="TSPL.2022_Assignment4-3174" class="Symbol">{</a><a id="TSPL.2022_Assignment4-3175" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3175" class="Bound">Γ</a> <a id="TSPL.2022_Assignment4-3177" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3177" class="Bound">A</a> <a id="TSPL.2022_Assignment4-3179" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3179" class="Bound">B</a> <a id="TSPL.2022_Assignment4-3181" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3181" class="Bound">C</a><a id="TSPL.2022_Assignment4-3182" class="Symbol">}</a> <a id="TSPL.2022_Assignment4-3184" class="Symbol">{</a><a id="TSPL.2022_Assignment4-3185" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3185" class="Bound">V</a> <a id="TSPL.2022_Assignment4-3187" class="Symbol">:</a> <a id="TSPL.2022_Assignment4-3189" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3175" class="Bound">Γ</a> <a id="TSPL.2022_Assignment4-3191" href="../../../More/#plfa_plfa-part2-More-14950" class="Datatype Operator">⊢</a> <a id="TSPL.2022_Assignment4-3193" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3177" class="Bound">A</a><a id="TSPL.2022_Assignment4-3194" class="Symbol">}</a> <a id="TSPL.2022_Assignment4-3196" class="Symbol">{</a><a id="TSPL.2022_Assignment4-3197" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3197" class="Bound">W</a> <a id="TSPL.2022_Assignment4-3199" class="Symbol">:</a> <a id="TSPL.2022_Assignment4-3201" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3175" class="Bound">Γ</a> <a id="TSPL.2022_Assignment4-3203" href="../../../More/#plfa_plfa-part2-More-14950" class="Datatype Operator">⊢</a> <a id="TSPL.2022_Assignment4-3205" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3179" class="Bound">B</a><a id="TSPL.2022_Assignment4-3206" class="Symbol">}</a> <a id="TSPL.2022_Assignment4-3208" class="Symbol">{</a><a id="TSPL.2022_Assignment4-3209" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3209" class="Bound">N</a> <a id="TSPL.2022_Assignment4-3211" class="Symbol">:</a> <a id="TSPL.2022_Assignment4-3213" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3175" class="Bound">Γ</a> <a id="TSPL.2022_Assignment4-3215" href="../../../More/#plfa_plfa-part2-More-14667" class="InductiveConstructor Operator">,</a> <a id="TSPL.2022_Assignment4-3217" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3177" class="Bound">A</a> <a id="TSPL.2022_Assignment4-3219" href="../../../More/#plfa_plfa-part2-More-14667" class="InductiveConstructor Operator">,</a> <a id="TSPL.2022_Assignment4-3221" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3179" class="Bound">B</a> <a id="TSPL.2022_Assignment4-3223" href="../../../More/#plfa_plfa-part2-More-14950" class="Datatype Operator">⊢</a> <a id="TSPL.2022_Assignment4-3225" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3181" class="Bound">C</a><a id="TSPL.2022_Assignment4-3226" class="Symbol">}</a> <a id="TSPL.2022_Assignment4-3228" class="Symbol">→</a>
        <a id="TSPL.2022_Assignment4-3238" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3209" class="Bound">N</a> <a id="TSPL.2022_Assignment4-3240" href="../../../More/#plfa_plfa-part2-More-18893" class="Function Operator">[</a> <a id="TSPL.2022_Assignment4-3242" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3185" class="Bound">V</a> <a id="TSPL.2022_Assignment4-3244" href="../../../More/#plfa_plfa-part2-More-18893" class="Function Operator">][</a> <a id="TSPL.2022_Assignment4-3247" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3197" class="Bound">W</a> <a id="TSPL.2022_Assignment4-3249" href="../../../More/#plfa_plfa-part2-More-18893" class="Function Operator">]</a> <a id="TSPL.2022_Assignment4-3251" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="TSPL.2022_Assignment4-3253" class="Symbol">(</a><a id="TSPL.2022_Assignment4-3254" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3209" class="Bound">N</a> <a id="TSPL.2022_Assignment4-3256" href="../../../More/#plfa_plfa-part2-More-18773" class="Function Operator">[</a> <a id="TSPL.2022_Assignment4-3258" href="../../../More/#plfa_plfa-part2-More-16887" class="Function">rename</a> <a id="TSPL.2022_Assignment4-3265" href="../../../More/#plfa_plfa-part2-More-14838" class="InductiveConstructor Operator">S_</a> <a id="TSPL.2022_Assignment4-3268" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3197" class="Bound">W</a> <a id="TSPL.2022_Assignment4-3270" href="../../../More/#plfa_plfa-part2-More-18773" class="Function Operator">]</a><a id="TSPL.2022_Assignment4-3271" class="Symbol">)</a> <a id="TSPL.2022_Assignment4-3273" href="../../../More/#plfa_plfa-part2-More-18773" class="Function Operator">[</a> <a id="TSPL.2022_Assignment4-3275" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3185" class="Bound">V</a> <a id="TSPL.2022_Assignment4-3277" href="../../../More/#plfa_plfa-part2-More-18773" class="Function Operator">]</a>
</pre><p>Note the arguments need to be swapped and <code>W</code> needs to have its context adjusted via renaming in order for the right-hand side to be well typed.</p><h2 id="inference">Inference</h2><pre class="Agda"><a id="TSPL.2022_Assignment4-3448" class="Keyword">module</a> <a id="TSPL.2022_Assignment4-Inference"></a><a id="TSPL.2022_Assignment4-3455" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-3455" class="Module">Inference</a> <a id="TSPL.2022_Assignment4-3465" class="Keyword">where</a>
</pre><h2 id="imports-1">Imports</h2><pre class="Agda">  <a id="TSPL.2022_Assignment4-3498" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-3505" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="TSPL.2022_Assignment4-3543" class="Symbol">as</a> <a id="TSPL.2022_Assignment4-3546" class="Module">Eq</a>
  <a id="TSPL.2022_Assignment4-3551" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-3556" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="TSPL.2022_Assignment4-3559" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-3565" class="Symbol">(</a><a id="TSPL.2022_Assignment4-3566" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="TSPL.2022_Assignment4-3569" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-3571" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="TSPL.2022_Assignment4-3575" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-3577" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a><a id="TSPL.2022_Assignment4-3580" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-3582" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1729" class="Function">trans</a><a id="TSPL.2022_Assignment4-3587" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-3589" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a><a id="TSPL.2022_Assignment4-3593" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-3595" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1367" class="Function">cong₂</a><a id="TSPL.2022_Assignment4-3600" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-3602" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#830" class="Function Operator">_≢_</a><a id="TSPL.2022_Assignment4-3605" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-3609" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-3614" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-3621" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html" class="Module">Data.Empty</a> <a id="TSPL.2022_Assignment4-3632" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-3638" class="Symbol">(</a><a id="TSPL.2022_Assignment4-3639" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html#526" class="Datatype">⊥</a><a id="TSPL.2022_Assignment4-3640" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-3642" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html#628" class="Function">⊥-elim</a><a id="TSPL.2022_Assignment4-3648" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-3652" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-3657" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-3664" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Nat.html" class="Module">Data.Nat</a> <a id="TSPL.2022_Assignment4-3673" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-3679" class="Symbol">(</a><a id="TSPL.2022_Assignment4-3680" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="TSPL.2022_Assignment4-3681" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-3683" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="TSPL.2022_Assignment4-3687" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-3689" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="TSPL.2022_Assignment4-3692" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-3694" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#325" class="Primitive Operator">_+_</a><a id="TSPL.2022_Assignment4-3697" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-3699" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#528" class="Primitive Operator">_*_</a><a id="TSPL.2022_Assignment4-3702" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-3706" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-3711" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-3718" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.String.html" class="Module">Data.String</a> <a id="TSPL.2022_Assignment4-3730" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-3736" class="Symbol">(</a><a id="TSPL.2022_Assignment4-3737" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.String.html#336" class="Postulate">String</a><a id="TSPL.2022_Assignment4-3743" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-3745" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.String.Properties.html#2275" class="Function Operator">_≟_</a><a id="TSPL.2022_Assignment4-3748" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-3752" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-3757" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-3764" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html" class="Module">Data.Product</a> <a id="TSPL.2022_Assignment4-3777" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-3783" class="Symbol">(</a><a id="TSPL.2022_Assignment4-3784" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">_×_</a><a id="TSPL.2022_Assignment4-3787" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-3789" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1369" class="Function">∃</a><a id="TSPL.2022_Assignment4-3790" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-3792" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1806" class="Function">∃-syntax</a><a id="TSPL.2022_Assignment4-3800" class="Symbol">)</a> <a id="TSPL.2022_Assignment4-3802" class="Keyword">renaming</a> <a id="TSPL.2022_Assignment4-3811" class="Symbol">(</a><a id="TSPL.2022_Assignment4-3812" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="TSPL.2022_Assignment4-3816" class="Symbol">to</a> <a id="TSPL.2022_Assignment4-3819" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="TSPL.2022_Assignment4-3824" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-3828" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-3833" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-3840" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="TSPL.2022_Assignment4-3857" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-3863" class="Symbol">(</a><a id="TSPL.2022_Assignment4-3864" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#656" class="Function Operator">¬_</a><a id="TSPL.2022_Assignment4-3866" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-3868" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1511" class="Record">Dec</a><a id="TSPL.2022_Assignment4-3871" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-3873" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a><a id="TSPL.2022_Assignment4-3876" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-3878" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a><a id="TSPL.2022_Assignment4-3880" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-3884" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-3889" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-3896" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a> <a id="TSPL.2022_Assignment4-3923" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-3929" class="Symbol">(</a><a id="TSPL.2022_Assignment4-3930" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Decidable.Core.html#1406" class="Function">False</a><a id="TSPL.2022_Assignment4-3935" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-3937" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Decidable.Core.html#1815" class="Function">toWitnessFalse</a><a id="TSPL.2022_Assignment4-3951" class="Symbol">)</a>
</pre><p>Once we have a type derivation, it will be easy to construct from it the intrinsically-typed representation. In order that we can compare with our previous development, we import module <code>plfa.part2.More</code>:</p><pre class="Agda">  <a id="TSPL.2022_Assignment4-4175" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-4182" href="../../../More/#" class="Module">plfa.part2.More</a> <a id="TSPL.2022_Assignment4-4198" class="Symbol">as</a> <a id="TSPL.2022_Assignment4-4201" class="Module">DB</a>
</pre><p>The phrase <code>as DB</code> allows us to refer to definitions from that module as, for instance, <code>DB._⊢_</code>, which is invoked as <code>Γ DB.⊢ A</code>, where <code>Γ</code> has type <code>DB.Context</code> and <code>A</code> has type <code>DB.Type</code>.</p><pre class="Agda">  <a id="TSPL.2022_Assignment4-4407" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-4412" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-4419" href="../../../Inference/#" class="Module">plfa.part2.Inference</a>
    <a id="TSPL.2022_Assignment4-4444" class="Keyword">hiding</a> <a id="TSPL.2022_Assignment4-4451" class="Symbol">()</a>
</pre><h4 id="bidirectional-mul">Exercise <code>bidirectional-mul</code> (recommended)</h4><p>Rewrite your definition of multiplication from Chapter <a href="../../../Lambda/">Lambda</a>, decorated to support inference.</p><pre class="Agda">  <a id="TSPL.2022_Assignment4-4647" class="Comment">-- Your code goes here</a>
</pre><h4 id="bidirectional-products">Exercise <code>bidirectional-products</code> (recommended)</h4><p>Extend the bidirectional type rules to include products from Chapter <a href="../../../More/">More</a>.</p><pre class="Agda">  <a id="TSPL.2022_Assignment4-4852" class="Comment">-- Your code goes here</a>
</pre><h4 id="exercise-bidirectional-rest-stretch">Exercise <code>bidirectional-rest</code> (stretch)</h4><p>Extend the bidirectional type rules to include the rest of the constructs from Chapter <a href="../../../More/">More</a>.</p><pre class="Agda">  <a id="TSPL.2022_Assignment4-5041" class="Comment">-- Your code goes here</a>
</pre><h4 id="exercise-inference-multiplication-recommended">Exercise <code>inference-multiplication</code> (recommended)</h4><p>Apply inference to your decorated definition of multiplication from exercise <a href="../../../Inference/#bidirectional-mul"><code>bidirectional-mul</code></a>, and show that erasure of the inferred typing yields your definition of multiplication from Chapter <a href="../../../DeBruijn/">DeBruijn</a>.</p><pre class="Agda">  <a id="TSPL.2022_Assignment4-5391" class="Comment">-- Your code goes here</a>
</pre><h4 id="exercise-inference-products-recommended">Exercise <code>inference-products</code> (recommended)</h4><p>Using your rules from exercise <a href="../../../Inference/#bidirectional-products"><code>bidirectional-products</code></a>, extend bidirectional inference to include products.</p><pre class="Agda">  <a id="TSPL.2022_Assignment4-5627" class="Comment">-- Your code goes here</a>
</pre><h4 id="exercise-inference-rest-stretch">Exercise <code>inference-rest</code> (stretch)</h4><p>Extend the bidirectional type rules to include the rest of the constructs from Chapter <a href="../../../More/">More</a>.</p><pre class="Agda">  <a id="TSPL.2022_Assignment4-5811" class="Comment">-- Your code goes here</a>
</pre><h2 id="untyped">Untyped</h2><pre class="Agda"><a id="TSPL.2022_Assignment4-5857" class="Keyword">module</a> <a id="TSPL.2022_Assignment4-Untyped"></a><a id="TSPL.2022_Assignment4-5864" href="../../../TSPL/2022/Assignment4/#TSPL.2022_Assignment4-5864" class="Module">Untyped</a> <a id="TSPL.2022_Assignment4-5872" class="Keyword">where</a>
</pre><h2 id="imports-2">Imports</h2><pre class="Agda">  <a id="TSPL.2022_Assignment4-5905" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-5912" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="TSPL.2022_Assignment4-5950" class="Symbol">as</a> <a id="TSPL.2022_Assignment4-5953" class="Module">Eq</a>
  <a id="TSPL.2022_Assignment4-5958" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-5963" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="TSPL.2022_Assignment4-5966" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-5972" class="Symbol">(</a><a id="TSPL.2022_Assignment4-5973" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="TSPL.2022_Assignment4-5976" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-5978" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="TSPL.2022_Assignment4-5982" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-5984" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a><a id="TSPL.2022_Assignment4-5987" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-5989" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1729" class="Function">trans</a><a id="TSPL.2022_Assignment4-5994" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-5996" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a><a id="TSPL.2022_Assignment4-6000" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-6004" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-6009" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-6016" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html" class="Module">Data.Empty</a> <a id="TSPL.2022_Assignment4-6027" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-6033" class="Symbol">(</a><a id="TSPL.2022_Assignment4-6034" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html#526" class="Datatype">⊥</a><a id="TSPL.2022_Assignment4-6035" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-6037" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html#628" class="Function">⊥-elim</a><a id="TSPL.2022_Assignment4-6043" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-6047" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-6052" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-6059" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Nat.html" class="Module">Data.Nat</a> <a id="TSPL.2022_Assignment4-6068" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-6074" class="Symbol">(</a><a id="TSPL.2022_Assignment4-6075" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="TSPL.2022_Assignment4-6076" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-6078" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="TSPL.2022_Assignment4-6082" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-6084" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="TSPL.2022_Assignment4-6087" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-6089" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#325" class="Primitive Operator">_+_</a><a id="TSPL.2022_Assignment4-6092" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-6094" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Nat.Base.html#2874" class="Primitive Operator">_∸_</a><a id="TSPL.2022_Assignment4-6097" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-6101" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-6106" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-6113" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html" class="Module">Data.Product</a> <a id="TSPL.2022_Assignment4-6126" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-6132" class="Symbol">(</a><a id="TSPL.2022_Assignment4-6133" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">_×_</a><a id="TSPL.2022_Assignment4-6136" class="Symbol">)</a> <a id="TSPL.2022_Assignment4-6138" class="Keyword">renaming</a> <a id="TSPL.2022_Assignment4-6147" class="Symbol">(</a><a id="TSPL.2022_Assignment4-6148" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="TSPL.2022_Assignment4-6152" class="Symbol">to</a> <a id="TSPL.2022_Assignment4-6155" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="TSPL.2022_Assignment4-6160" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-6164" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-6169" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-6176" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Unit.html" class="Module">Data.Unit</a> <a id="TSPL.2022_Assignment4-6186" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-6192" class="Symbol">(</a><a id="TSPL.2022_Assignment4-6193" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#164" class="Record">⊤</a><a id="TSPL.2022_Assignment4-6194" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-6196" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="TSPL.2022_Assignment4-6198" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-6202" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-6207" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-6214" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.html" class="Module">Function</a> <a id="TSPL.2022_Assignment4-6223" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-6229" class="Symbol">(</a><a id="TSPL.2022_Assignment4-6230" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">_∘_</a><a id="TSPL.2022_Assignment4-6233" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-6237" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-6242" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-6249" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Equivalence.html" class="Module">Function.Equivalence</a> <a id="TSPL.2022_Assignment4-6270" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-6276" class="Symbol">(</a><a id="TSPL.2022_Assignment4-6277" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Equivalence.html#1204" class="Function Operator">_⇔_</a><a id="TSPL.2022_Assignment4-6280" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-6282" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Equivalence.html#1297" class="Function">equivalence</a><a id="TSPL.2022_Assignment4-6293" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-6297" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-6302" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-6309" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="TSPL.2022_Assignment4-6326" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-6332" class="Symbol">(</a><a id="TSPL.2022_Assignment4-6333" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#656" class="Function Operator">¬_</a><a id="TSPL.2022_Assignment4-6335" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-6337" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1511" class="Record">Dec</a><a id="TSPL.2022_Assignment4-6340" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-6342" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a><a id="TSPL.2022_Assignment4-6345" class="Symbol">;</a> <a id="TSPL.2022_Assignment4-6347" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a><a id="TSPL.2022_Assignment4-6349" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-6353" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-6358" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-6365" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a> <a id="TSPL.2022_Assignment4-6392" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-6398" class="Symbol">(</a><a id="TSPL.2022_Assignment4-6399" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Decidable.html#1228" class="Function">map</a><a id="TSPL.2022_Assignment4-6402" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-6406" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-6411" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-6418" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Negation.html" class="Module">Relation.Nullary.Negation</a> <a id="TSPL.2022_Assignment4-6444" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-6450" class="Symbol">(</a><a id="TSPL.2022_Assignment4-6451" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Negation.Core.html#998" class="Function">contraposition</a><a id="TSPL.2022_Assignment4-6465" class="Symbol">)</a>
  <a id="TSPL.2022_Assignment4-6469" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-6474" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-6481" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Product.html" class="Module">Relation.Nullary.Product</a> <a id="TSPL.2022_Assignment4-6506" class="Keyword">using</a> <a id="TSPL.2022_Assignment4-6512" class="Symbol">(</a><a id="TSPL.2022_Assignment4-6513" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Product.html#921" class="Function Operator">_×-dec_</a><a id="TSPL.2022_Assignment4-6520" class="Symbol">)</a>
</pre><pre class="Agda">  <a id="TSPL.2022_Assignment4-6534" class="Keyword">open</a> <a id="TSPL.2022_Assignment4-6539" class="Keyword">import</a> <a id="TSPL.2022_Assignment4-6546" href="../../../Untyped/#" class="Module">plfa.part2.Untyped</a>
    <a id="TSPL.2022_Assignment4-6569" class="Keyword">hiding</a> <a id="TSPL.2022_Assignment4-6576" class="Symbol">()</a>
</pre><h4 id="exercise-type-practice">Exercise (<code>Type≃⊤</code>) (practice)</h4><p>Show that <code>Type</code> is isomorphic to <code>⊤</code>, the unit type.</p><pre class="Agda">  <a id="TSPL.2022_Assignment4-6686" class="Comment">-- Your code goes here</a>
</pre><h4 id="exercise-contextℕ-practice">Exercise (<code>Context≃ℕ</code>) (practice)</h4><p>Show that <code>Context</code> is isomorphic to <code>ℕ</code>.</p><pre class="Agda">  <a id="TSPL.2022_Assignment4-6807" class="Comment">-- Your code goes here</a>
</pre><h4 id="exercise-variant-1-practice">Exercise (<code>variant-1</code>) (practice)</h4><p>How would the rules change if we want call-by-value where terms normalise completely? Assume that <code>β</code> should not permit reduction unless both terms are in normal form.</p><pre class="Agda">  <a id="TSPL.2022_Assignment4-7055" class="Comment">-- Your code goes here</a>
</pre><h4 id="exercise-variant-2-practice">Exercise (<code>variant-2</code>) (practice)</h4><p>How would the rules change if we want call-by-value where terms do not reduce underneath lambda? Assume that <code>β</code> permits reduction when both terms are values (that is, lambda abstractions). What would <code>2+2ᶜ</code> reduce to in this case?</p><pre class="Agda">  <a id="TSPL.2022_Assignment4-7368" class="Comment">-- Your code goes here</a>
</pre><h4 id="exercise-plus-eval-practice">Exercise <code>plus-eval</code> (practice)</h4><p>Use the evaluator to confirm that <code>plus · two · two</code> and <code>four</code> normalise to the same term.</p><pre class="Agda">  <a id="TSPL.2022_Assignment4-7538" class="Comment">-- Your code goes here</a>
</pre><h4 id="exercise-multiplication-untyped-recommended">Exercise <code>multiplication-untyped</code> (recommended)</h4><p>Use the encodings above to translate your definition of multiplication from previous chapters with the Scott representation and the encoding of the fixpoint operator. Confirm that two times two is four.</p><pre class="Agda">  <a id="TSPL.2022_Assignment4-7834" class="Comment">-- Your code goes here</a>
</pre><h4 id="exercise-encode-more-stretch">Exercise <code>encode-more</code> (stretch)</h4><p>Along the lines above, encode all of the constructs of Chapter <a href="../../../More/">More</a>, save for primitive numbers, in the untyped lambda calculus.</p><pre class="Agda">  <a id="TSPL.2022_Assignment4-8051" class="Comment">-- Your code goes here</a>
</pre></div><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/courses/TSPL/2022/Assignment4.lagda.md">Source</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card"><data class="u-url" href="../../../"></data><div class="wrapper"><h2 class="footer-heading">Programming Language Foundations in Agda</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>